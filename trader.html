<!doctype html>
<html lang="en">
<head>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Trader Profile — Trade With Rashid</title>
<link rel="stylesheet" href="styles.css">
</head>
<body data-page="trader">
<header class="site-header">
  <div class="container">
    <a class="brand" href="index.html">Trade With Rashid</a>
    <nav>
      <a href="markets.html">Markets</a>
      <a href="dashboard.html" id="nav-dashboard-3">Dashboard</a>
      <a href="about.html">About</a>
    </nav>
    <button id="loginBtn3" class="btn small">Login</button>
  </div>
</header>

<main class="container">
  <section class="trader-profile card">
    <div class="trader-header">
      <div class="trader-avatar">
        <img id="traderAvatar" src="" alt="Trader Avatar" />
      </div>
      <div class="trader-info">
        <h1 id="traderName">Trader Name</h1>
        <p id="traderStyle">Trading Style</p>
        <div class="trader-stats">
          <div class="stat">
            <div class="stat-value" id="traderROI">0%</div>
            <div class="stat-label">ROI</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="traderFollowers">0</div>
            <div class="stat-label">Followers</div>
          </div>
          <div class="stat">
            <div class="stat-value" id="traderRisk">Low</div>
            <div class="stat-label">Risk</div>
          </div>
        </div>
      </div>
      <div class="trader-actions">
        <button id="followBtn" class="btn">Follow</button>
        <button id="backBtn" class="btn alt" onclick="history.back()">Back to Markets</button>
      </div>
    </div>
  </section>

  <section class="trader-performance card">
    <h2>Performance Overview</h2>
    <div id="performanceChart" class="chart-placeholder">
      <p>Performance chart would go here (demo)</p>
    </div>
  </section>

  <section class="trader-trades card">
    <h2>Recent Trades</h2>
    <table class="trades-table" id="tradesTable">
      <thead>
        <tr><th>Symbol</th><th>Type</th><th>Open</th><th>Close</th><th>P&L</th><th>Duration</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>
</main>

<footer class="site-footer">
  <div class="container">
    <div>© <span id="year3"></span> Trade With Rashid — Demo</div>
    <div class="muted">Fictional data only.</div>
  </div>
</footer>

<script src="script.js" defer></script>
<!-- START DASHBOARD (ChatGPT) -->
<script>
// -------- Access Code Check --------
const params = new URLSearchParams(window.location.search);
const traderID = parseInt(params.get("id") || "1");
const trader = TRADERS.find(t => t.id === traderID);
if (!trader) {
  alert("Trader not found");
  window.location = "markets.html";
} else {
  const enteredCode = prompt(`Enter the 4-digit access code for ${trader.name}:`);
  if (enteredCode !== trader.accessCode.toString()) {
    alert("Incorrect access code");
    window.location = "markets.html";
  }
}

// -------- Deterministic Fake Data by ID --------

// Simple deterministic PRNG
function seedRandom(seed) {
  return function() {
    seed = (seed * 9301 + 49297) % 233280;
    return seed / 233280;
  };
}
const rand = seedRandom(traderID * 999);

// Deterministic fake values
const fakeData = {
  name: trader.name,
  roi: trader.roi,
  followers: trader.profit, // using profit as followers for demo
  risk: trader.riskLevel,
  winrate: Math.round(rand() * 30 + 55),         // 55%–85%
  trades: []
};

// Generate fake trades
for (let i = 0; i < 10; i++) {
  fakeData.trades.push({
    symbol: ["EURUSD","BTCUSD","XAUUSD","ETHUSD","GBPJPY"][Math.floor(rand()*5)],
    type: rand() > 0.5 ? "Buy" : "Sell",
    open: (rand()*10000).toFixed(2),
    close: (rand()*10000).toFixed(2),
    pnl: (rand()*300 - 150).toFixed(2),
    duration: Math.floor(rand()*12+1) + "h"
  });
}

// Now update your HTML elements here
document.getElementById("traderName").innerText = fakeData.name;
document.getElementById("traderROI").innerText = fakeData.roi + "%";
document.getElementById("traderFollowers").innerText = fakeData.followers;
document.getElementById("traderRisk").innerText = fakeData.risk;

// Populate trades table
const tbody = document.getElementById("tradesTable").querySelector("tbody");
fakeData.trades.forEach(t => {
  const row = `
    <tr>
      <td>${t.symbol}</td>
      <td>${t.type}</td>
      <td>${t.open}</td>
      <td>${t.close}</td>
      <td>${t.pnl}</td>
      <td>${t.duration}</td>
    </tr>`;
  tbody.insertAdjacentHTML("beforeend", row);
});
</script>
<!-- END DASHBOARD -->
</body>
</html>
